<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Permissions-Policy" content="autoplay=*, encrypted-media=*">
    <link rel="icon" href="numberblocks-logo.png" type="image/png">
    <title>NumberBlocks Episodes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css?v=1.0.8">
    <script src="https://www.youtube.com/iframe_api"></script>
</head>
<body>

<!-- ì‚¬ì´ë“œ ë©”ë‰´ Start -->
<nav class="side-nav" aria-label="ì‹œë¦¬ì¦ˆ ì„ íƒ">
    <ul>
        <li><button class="series-btn" data-series="numberblocks" aria-label="NumberBlocks ì‹œë¦¬ì¦ˆ ë³´ê¸°">
            <img src="numberblocks-logo.png" alt="NumberBlocks ë¡œê³ " class="side-logo" />
        </button></li>
        <li><button class="series-btn" data-series="peppapig" aria-label="Peppa Pig ì‹œë¦¬ì¦ˆ ë³´ê¸°">
            <img src="peppa-pig-logo.jpg" alt="Peppa Pig ë¡œê³ " class="side-logo" />
        </button></li>
    </ul>
</nav>
<!-- ì‚¬ì´ë“œ ë©”ë‰´ End -->

<div class="main-content" id="main-content">
    <div id="numberblocks-section">
        <!-- íƒ­ ë²„íŠ¼ Start -->
        <div class="tab">
            <button class="tab-links" onclick="openTab(event, 'Episodes1to10')" id="defaultOpen">1-10 Episodes</button>
            <button class="tab-links" onclick="openTab(event, 'TheRestOfLevel1')">Level 1</button>
            <button class="tab-links" onclick="openTab(event, 'TheRestOfLevel2')">Level 2</button>
            <button class="tab-links" onclick="openTab(event, 'TheRestOfLevel3')">Level 3</button>
            <button class="tab-links" onclick="openTab(event, 'Episodes11to100')">11-100 Episodes</button>
            <button class="tab-links" onclick="openTab(event, 'SpecialAdventures')">ğŸŒŸ</button>
            
        </div>
        <!-- íƒ­ ë²„íŠ¼ End -->
        <!-- íƒ­ ë³„ ì¹´ë“œ Start -->
        <div id="Episodes1to10" class="tab-content">
            <div class="grid-container" id="grid-1to10"></div>
        </div>
        <div id="TheRestOfLevel1" class="tab-content">
            <div class="grid-container" id="grid-level1"></div>
        </div>
        <div id="TheRestOfLevel2" class="tab-content">
            <div class="grid-container" id="grid-level2"></div>
        </div>
        <div id="TheRestOfLevel3" class="tab-content">
            <div class="grid-container" id="grid-level3"></div>
        </div>
        <div id="Episodes11to100" class="tab-content">
            <div class="grid-container" id="grid-11to100"></div>
        </div>
        <div id="SpecialAdventures" class="tab-content">
            <div class="grid-container" id="grid-special-adventures"></div>
        </div>
        <footer class="site-footer">
            Based on <a href="https://www.learningblocks.tv/numberblocks/episodes" target="_blank" rel="noopener noreferrer">
            NumberBlocks official page</a>
        </footer>
        
    </div>
    <div id="peppa-section" style="display:none;">
        <div class="tab">
            <button class="tab-links active" onclick="openTab(event, 'PeppaSeason1')" id="peppaDefaultOpen">Season 1</button>
        </div>
        <div id="PeppaSeason1" class="tab-content" style="display:block;">
            <div class="grid-container" id="grid-peppa1"></div>
        </div>
        <footer class="site-footer">
            Based on 
            <a href="https://www.youtube.com/@PeppaPigOfficial" target="_blank" rel="noopener noreferrer">Peppa Pig Official page</a> and
            <a href="https://www.youtube.com/@George Pig" target="_blank" rel="noopener noreferrer">George Pig page</a>
        </footer>
    </div>
</div>

<script>
// ìŠ¤ë§ˆíŠ¸ ìºì‹œ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸
(function() {
    const CURRENT_VERSION = '1.0.8';
    const STORAGE_KEY = 'numberblocks_version';
    
    // ì €ì¥ëœ ë²„ì „ í™•ì¸
    function getStoredVersion() {
        try {
            return localStorage.getItem(STORAGE_KEY);
        } catch (e) {
            return null;
        }
    }
    
    // ë²„ì „ ì €ì¥
    function setStoredVersion(version) {
        try {
            localStorage.setItem(STORAGE_KEY, version);
        } catch (e) {
            // localStorage ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ê²½ìš° ë¬´ì‹œ
        }
    }
    
    // ë²„ì „ì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸
    function isVersionChanged() {
        const storedVersion = getStoredVersion();
        return storedVersion !== CURRENT_VERSION;
    }
    
    // ìºì‹œ ë¬´íš¨í™”ê°€ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ìƒˆë¡œê³ ì¹¨
    function checkAndReload() {
        if (isVersionChanged()) {
            console.log('ë²„ì „ì´ ë³€ê²½ë˜ì–´ ìºì‹œë¥¼ ë¬´íš¨í™”í•©ë‹ˆë‹¤:', getStoredVersion(), '->', CURRENT_VERSION);
            setStoredVersion(CURRENT_VERSION);
            
            // iOS Safari íŠ¹ë³„ ì²˜ë¦¬
            if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
                window.addEventListener('pageshow', function(event) {
                    if (event.persisted) {
                        window.location.reload();
                    }
                });
            }
            
            // ë’¤ë¡œê°€ê¸°ë¡œ ì ‘ê·¼í•œ ê²½ìš°ì—ë§Œ ìƒˆë¡œê³ ì¹¨
            if (window.performance && window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD) {
                window.location.reload(true);
            }
        } else {
            console.log('í˜„ì¬ ë²„ì „ì´ ìµœì‹ ì…ë‹ˆë‹¤:', CURRENT_VERSION);
        }
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë²„ì „ ì²´í¬
    checkAndReload();
})();
</script>
<script src="assets/js/episode-data.js?v=1.0.8"></script>
<script src="assets/js/common.js?v=1.0.8"></script>
<script src="assets/js/iframe-mode.js?v=1.0.8"></script>

</body>
</html>
